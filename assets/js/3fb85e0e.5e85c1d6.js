"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6433],{1688:(e,t,n)=>{n.d(t,{E:()=>o});var a=n(6540);const o=e=>{let{children:t,title:n="Detailed Explanation"}=e;return a.createElement("details",{className:"detailed-explanation"},a.createElement("summary",null,a.createElement("h4",null,n)),t)}},4965:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>p});var a=n(8168),o=(n(6540),n(5680));n(1688);const i={id:"part-3-data-flow",title:"Redux Essentials, Part 3: Basic Redux Data Flow",sidebar_label:"Basic Redux Data Flow",description:"The official Redux Essentials tutorial: learn how data flows in a React + Redux app"},s=void 0,r={unversionedId:"tutorials/essentials/part-3-data-flow",id:"tutorials/essentials/part-3-data-flow",title:"Redux Essentials, Part 3: Basic Redux Data Flow",description:"The official Redux Essentials tutorial: learn how data flows in a React + Redux app",source:"@site/../docs/tutorials/essentials/part-3-data-flow.md",sourceDirName:"tutorials/essentials",slug:"/tutorials/essentials/part-3-data-flow",permalink:"/tutorials/essentials/part-3-data-flow",draft:!1,editUrl:"https://github.com/reduxjs/redux/edit/master/website/../docs/tutorials/essentials/part-3-data-flow.md",tags:[],version:"current",lastUpdatedAt:1737618502,formattedLastUpdatedAt:"Jan 23, 2025",frontMatter:{id:"part-3-data-flow",title:"Redux Essentials, Part 3: Basic Redux Data Flow",sidebar_label:"Basic Redux Data Flow",description:"The official Redux Essentials tutorial: learn how data flows in a React + Redux app"},sidebar:"docs",previous:{title:"Redux Toolkit App Structure",permalink:"/tutorials/essentials/part-2-app-structure"},next:{title:"Using Redux Data",permalink:"/tutorials/essentials/part-4-using-data"}},l={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Project Setup",id:"project-setup",level:3},{value:"Creating a New Redux + React Project",id:"creating-a-new-redux--react-project",level:4},{value:"Exploring the Initial Project",id:"exploring-the-initial-project",level:4},{value:"Setting Up the Redux Store",id:"setting-up-the-redux-store",level:2},{value:"Adding the Redux Packages",id:"adding-the-redux-packages",level:3},{value:"Creating the Store",id:"creating-the-store",level:3},{value:"Providing the Store",id:"providing-the-store",level:3},{value:"Inspecting the Redux State",id:"inspecting-the-redux-state",level:3},{value:"Exporting Store Types",id:"exporting-store-types",level:3},{value:"Exporting Typed Hooks",id:"exporting-typed-hooks",level:3},{value:"Main Posts Feed",id:"main-posts-feed",level:2},{value:"Creating the Posts Slice",id:"creating-the-posts-slice",level:3},{value:"Showing the Posts List",id:"showing-the-posts-list",level:3},{value:"Adding New Posts",id:"adding-new-posts",level:3},{value:"Adding the New Post Form",id:"adding-the-new-post-form",level:4},{value:"Saving Post Entries",id:"saving-post-entries",level:4},{value:"Dispatching the &quot;Post Added&quot; Action",id:"dispatching-the-post-added-action",level:4},{value:"What You&#39;ve Learned",id:"what-youve-learned",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2}],d={toc:p},c="wrapper";function u(e){let{components:t,...i}=e;return(0,o.yg)(c,(0,a.A)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("admonition",{title:"What You'll Learn",type:"tip"},(0,o.yg)("ul",{parentName:"admonition"},(0,o.yg)("li",{parentName:"ul"},"How to set up a Redux store in a React application"),(0,o.yg)("li",{parentName:"ul"},'How to add "slices" of reducer logic to the Redux store with ',(0,o.yg)("inlineCode",{parentName:"li"},"createSlice")),(0,o.yg)("li",{parentName:"ul"},"Reading Redux data in components with the ",(0,o.yg)("inlineCode",{parentName:"li"},"useSelector")," hook"),(0,o.yg)("li",{parentName:"ul"},"Dispatching actions in components with the ",(0,o.yg)("inlineCode",{parentName:"li"},"useDispatch")," hook"))),(0,o.yg)("admonition",{title:"Prerequisites",type:"info"},(0,o.yg)("ul",{parentName:"admonition"},(0,o.yg)("li",{parentName:"ul"},'Familiarity with key Redux terms and concepts like "actions", "reducers", "store", and "dispatching". (See ',(0,o.yg)("a",{parentName:"li",href:"/tutorials/essentials/part-1-overview-concepts"},(0,o.yg)("strong",{parentName:"a"},"Part 1: Redux Overview and Concepts"))," for explanations of these terms.)"),(0,o.yg)("li",{parentName:"ul"},"Basic understanding of ",(0,o.yg)("a",{parentName:"li",href:"https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html"},"TypeScript syntax and usage")))),(0,o.yg)("h2",{id:"introduction"},"Introduction"),(0,o.yg)("p",null,"In ",(0,o.yg)("a",{parentName:"p",href:"/tutorials/essentials/part-1-overview-concepts"},"Part 1: Redux Overview and Concepts"),", we looked at how Redux can help us build maintainable apps by giving us a single central place to put global app state. We also talked about core Redux concepts like dispatching action objects, using reducer functions that return new state values, and writing async logic using thunks. In ",(0,o.yg)("a",{parentName:"p",href:"/tutorials/essentials/part-2-app-structure"},"Part 2: Redux Toolkit App Structure"),", we saw how APIs like ",(0,o.yg)("inlineCode",{parentName:"p"},"configureStore")," and ",(0,o.yg)("inlineCode",{parentName:"p"},"createSlice")," from Redux Toolkit and ",(0,o.yg)("inlineCode",{parentName:"p"},"Provider")," and ",(0,o.yg)("inlineCode",{parentName:"p"},"useSelector")," from React-Redux work together to let us write Redux logic and interact with that logic from our React components."),(0,o.yg)("p",null,"Now that you have some idea of what these pieces are, it's time to put that knowledge into practice. We're going to build a small social media feed app, which will include a number of features that demonstrate some real-world use cases. This will help you understand how to use Redux in your own applications."),(0,o.yg)("p",null,"We'll be using ",(0,o.yg)("a",{parentName:"p",href:"https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html"},"TypeScript")," syntax to write our code. You can use Redux with plain JavaScript, but using TypeScript helps prevent many common mistakes, provides built-in documentation for your code, and lets your editor show you what variable types are needed in places like React components and Redux reducers. ",(0,o.yg)("strong",{parentName:"p"},"We strongly recommend using TypeScript for all Redux applications.")),(0,o.yg)("admonition",{type:"caution"},(0,o.yg)("p",{parentName:"admonition"},"The example app is not meant as a complete production-ready project. The goal is to help you learn the Redux APIs and typical usage patterns, and point you in the right direction using some limited examples. Also, some of the early pieces we build will be updated later on to show better ways to do things. ",(0,o.yg)("strong",{parentName:"p"},"Please read through the whole tutorial to see all the concepts in use"),".")),(0,o.yg)("h3",{id:"project-setup"},"Project Setup"),(0,o.yg)("p",null,"For this tutorial, we've created a pre-configured starter project that already has React and Redux set up, includes some default styling, and has a fake REST API that will allow us to write actual API requests in our app. You'll use this as the basis for writing the actual application code."),(0,o.yg)("p",null,"To get started, you can open and fork this CodeSandbox:"),(0,o.yg)("iframe",{class:"codesandbox",src:"https://codesandbox.io/embed/github/reduxjs/redux-essentials-example-app/tree/433b1132560f07c5911432182b6a4047610c25e9/?&fontsize=14&hidenavigation=1&theme=dark&runonclick=1",title:"redux-essentials-example-app",allow:"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"}),(0,o.yg)("p",null,"You can also ",(0,o.yg)("a",{parentName:"p",href:"https://github.com/reduxjs/redux-essentials-example-app"},"clone the same project from this Github repo"),". The project is configured to use ",(0,o.yg)("a",{parentName:"p",href:"https://yarnpkg.com/"},"Yarn 4")," as the package manager, but you can use any package manager (",(0,o.yg)("a",{parentName:"p",href:"https://docs.npmjs.com/cli/v10"},"NPM"),", ",(0,o.yg)("a",{parentName:"p",href:"https://pnpm.io/"},"PNPM"),", or ",(0,o.yg)("a",{parentName:"p",href:"https://bun.sh/docs/cli/install"},"Bun"),") as you prefer. After installing packages, you can start the local dev server with the ",(0,o.yg)("inlineCode",{parentName:"p"},"yarn dev")," command."),(0,o.yg)("p",null,"If you'd like to see the final version of what we're going to build, you can check out ",(0,o.yg)("a",{parentName:"p",href:"https://github.com/reduxjs/redux-essentials-example-app/tree/tutorial-steps-ts"},"the ",(0,o.yg)("strong",{parentName:"a"},(0,o.yg)("inlineCode",{parentName:"strong"},"tutorial-steps-ts")," branch")),", or ",(0,o.yg)("a",{parentName:"p",href:"https://codesandbox.io/s/github/reduxjs/redux-essentials-example-app/tree/tutorial-steps-ts"},"look at the final version in this CodeSandbox"),"."),(0,o.yg)("blockquote",null,(0,o.yg)("p",{parentName:"blockquote"},"We'd like to thank ",(0,o.yg)("a",{parentName:"p",href:"https://www.taniarascia.com/"},"Tania Rascia"),", whose ",(0,o.yg)("a",{parentName:"p",href:"https://www.taniarascia.com/redux-react-guide/"},"Using Redux with React")," tutorial helped inspire the example in this page. It also uses her ",(0,o.yg)("a",{parentName:"p",href:"https://taniarascia.github.io/primitive/"},"Primitive UI CSS starter")," for styling.")),(0,o.yg)("h4",{id:"creating-a-new-redux--react-project"},"Creating a New Redux + React Project"),(0,o.yg)("p",null,"Once you've finished this tutorial, you'll probably want to try working on your own projects. ",(0,o.yg)("strong",{parentName:"p"},"We recommend using the ",(0,o.yg)("a",{parentName:"strong",href:"/introduction/installation#create-a-react-redux-app"},"Redux templates for Vite and Next.js")," as the fastest way to create a new Redux + React project"),". The templates come with Redux Toolkit and React-Redux already configured, using ",(0,o.yg)("a",{parentName:"p",href:"/tutorials/essentials/part-1-overview-concepts"},'the same "counter" app example you saw in Part 1'),". This lets you jump right into writing your actual application code without having to add the Redux packages and set up the store."),(0,o.yg)("h4",{id:"exploring-the-initial-project"},"Exploring the Initial Project"),(0,o.yg)("p",null,"Let's take a quick look at what the initial project contains:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"/public"),": base CSS styles and other static files like icons"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"/src"),(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"main.tsx"),": the entry point file for the application, which renders the ",(0,o.yg)("inlineCode",{parentName:"li"},"<App>")," component. In this example, it also sets up the fake REST API on page load."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"App.tsx"),": the main application component. Renders the top navbar and handles client-side routing for the other content."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"index.css"),": styles for the complete application"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"/api"),(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"client.ts"),": a small ",(0,o.yg)("inlineCode",{parentName:"li"},"fetch")," wrapper client that allows us to make HTTP GET and POST requests"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"server.ts"),": provides a fake REST API for our data. Our app will fetch data from these fake endpoints later."))),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"/app"),(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"Navbar.tsx"),": renders the top header and nav content")))))),(0,o.yg)("p",null,"If you load the app now, you should see the header and a welcome message, but no functionality."),(0,o.yg)("p",null,"With that, let's get started!"),(0,o.yg)("h2",{id:"setting-up-the-redux-store"},"Setting Up the Redux Store"),(0,o.yg)("p",null,"Right now the project is empty, so we'll need to start by doing the one-time setup for the Redux pieces."),(0,o.yg)("h3",{id:"adding-the-redux-packages"},"Adding the Redux Packages"),(0,o.yg)("p",null,"If you look at ",(0,o.yg)("inlineCode",{parentName:"p"},"package.json"),", you'll see that we've already installed the two packages needed to use Redux:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"@reduxjs/toolkit"),": the modern Redux package, which includes all the Redux functions we'll be using to build the app"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"react-redux"),": the functions needed to let your React components talk to a Redux store")),(0,o.yg)("p",null,"If you're setting up a project from scratch, start by adding those packages to the project yourself."),(0,o.yg)("h3",{id:"creating-the-store"},"Creating the Store"),(0,o.yg)("p",null,"The first step is to create an actual Redux store. ",(0,o.yg)("strong",{parentName:"p"},"One of the principles of Redux is that there should only be ",(0,o.yg)("em",{parentName:"strong"},"one")," store instance for an entire application"),"."),(0,o.yg)("p",null,"We typically create and export the Redux store instance in its own file. The actual folder structure for the application is up to you, but it's standard to have application-wide setup and configuration in a ",(0,o.yg)("inlineCode",{parentName:"p"},"src/app/")," folder."),(0,o.yg)("p",null,"We'll start by adding a ",(0,o.yg)("inlineCode",{parentName:"p"},"src/app/store.ts")," file and creating the store."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Redux Toolkit includes a method called ",(0,o.yg)("inlineCode",{parentName:"strong"},"configureStore")),". This function creates a new Redux store instance. It has several options that you can pass in to change the store's behavior. It also applies the most common and useful configuration settings automatically, including checking for typical mistakes, and enabling the Redux DevTools extension so that you can view the state contents and action history."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/app/store.ts"',title:'"src/app/store.ts"'},"import { configureStore } from '@reduxjs/toolkit'\nimport type { Action } from '@reduxjs/toolkit'\n\ninterface CounterState {\n  value: number\n}\n\n// An example slice reducer function that shows how a Redux reducer works inside.\n// We'll replace this soon with real app logic.\nfunction counterReducer(state: CounterState = { value: 0 }, action: Action) {\n  switch (action.type) {\n    // Handle actions here\n    default: {\n      return state\n    }\n  }\n}\n\n// highlight-start\nexport const store = configureStore({\n  // Pass in the root reducer setup as the `reducer` argument\n  reducer: {\n    // Declare that `state.counter` will be updated by the `counterReducer` function\n    counter: counterReducer\n  }\n})\n// highlight-end\n")),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},(0,o.yg)("inlineCode",{parentName:"strong"},"configureStore")," always requires a ",(0,o.yg)("inlineCode",{parentName:"strong"},"reducer")," option"),'. This should typically be an object containing the individual "slice reducers" for the different parts of the application. (If necessary, you can also create the root reducer function separately and pass that as the ',(0,o.yg)("inlineCode",{parentName:"p"},"reducer")," argument.)"),(0,o.yg)("p",null,"For this first step, we're passing in a mock slice reducer function for the ",(0,o.yg)("inlineCode",{parentName:"p"},"counter")," slice, to show what the setup looks like. We'll replace this with a real slice reducer for the actual app we want to build in just a minute."),(0,o.yg)("admonition",{title:"Setup with Next.js",type:"tip"},(0,o.yg)("p",{parentName:"admonition"},"If you're using Next.js, the setup process takes a few more steps. See the ",(0,o.yg)("a",{parentName:"p",href:"/usage/nextjs"},"Setup with Next.js")," page for details on how to set up Redux with Next.js.")),(0,o.yg)("h3",{id:"providing-the-store"},"Providing the Store"),(0,o.yg)("p",null,"Redux by itself is a plain JS library, and can work with any UI layer. In this app, we're using React, so we need a way to let our React components interact with the Redux store."),(0,o.yg)("p",null,"To make this work, we need to use the React-Redux library and pass the Redux store into a ",(0,o.yg)("inlineCode",{parentName:"p"},"<Provider>")," component. This uses ",(0,o.yg)("a",{parentName:"p",href:"https://react.dev/learn/passing-data-deeply-with-context"},"React's Context API")," to make the Redux store accessible to all of the React components in our application."),(0,o.yg)("admonition",{type:"tip"},(0,o.yg)("p",{parentName:"admonition"},"It's important that we ",(0,o.yg)("em",{parentName:"p"},"should not")," try to directly import the Redux store into other application code files! Because there's only one store file, directly importing the store can accidentally cause circular import issues (where file A imports B imports C imports A), which lead to hard-to-track bugs. Additionally, we want to be able to ",(0,o.yg)("a",{parentName:"p",href:"/usage/writing-tests"},"write tests for the components and Redux logic"),", and those tests will need to create their own Redux store instances. Providing the store to the components via Context keeps this flexible and avoids import problems.")),(0,o.yg)("p",null,"To do this, we'll import the ",(0,o.yg)("inlineCode",{parentName:"p"},"store")," into the ",(0,o.yg)("inlineCode",{parentName:"p"},"main.tsx")," entry point file, wrap a ",(0,o.yg)("inlineCode",{parentName:"p"},"<Provider>")," with the store around the ",(0,o.yg)("inlineCode",{parentName:"p"},"<App>")," component:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/main.tsx"',title:'"src/main.tsx"'},"import { createRoot } from 'react-dom/client'\n// highlight-next-line\nimport { Provider } from 'react-redux'\n\nimport App from './App'\n// highlight-next-line\nimport { store } from './app/store'\n\n// skip mock API setup\n\nconst root = createRoot(document.getElementById('root')!)\n\nroot.render(\n  <React.StrictMode>\n    // highlight-start\n    <Provider store={store}>\n      <App />\n    </Provider>\n    // highlight-end\n  </React.StrictMode>\n)\n")),(0,o.yg)("h3",{id:"inspecting-the-redux-state"},"Inspecting the Redux State"),(0,o.yg)("p",null,"Now that we have a store, we can use the Redux DevTools extension to view the current Redux state."),(0,o.yg)("p",null,'If you open up your browser\'s DevTools view (such as by right-clicking anywhere in the page and choosing "Inspect"), you can click on the "Redux" tab. This will show the history of dispatched actions and the current state value:'),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"Redux DevTools: initial app state",src:n(224).A,width:"958",height:"474"})),(0,o.yg)("p",null,"The current state value should be an object that looks like this:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-ts"},"{\n  counter: {\n    value: 0\n  }\n}\n")),(0,o.yg)("p",null,"That shape was defined by the ",(0,o.yg)("inlineCode",{parentName:"p"},"reducer")," option we passed into ",(0,o.yg)("inlineCode",{parentName:"p"},"configureStore"),": an object, with a field named ",(0,o.yg)("inlineCode",{parentName:"p"},"counter"),", and the slice reducer for the ",(0,o.yg)("inlineCode",{parentName:"p"},"counter")," field returns an object like ",(0,o.yg)("inlineCode",{parentName:"p"},"{value}")," as its state."),(0,o.yg)("h3",{id:"exporting-store-types"},"Exporting Store Types"),(0,o.yg)("p",null,'Since we\'re using TypeScript, we\'re going to frequently refer to TS types for "the type of the Redux state" and "the type of the Redux store ',(0,o.yg)("inlineCode",{parentName:"p"},"dispatch"),' function".'),(0,o.yg)("p",null,"We need to export those types from the ",(0,o.yg)("inlineCode",{parentName:"p"},"store.ts")," file. We'll define the types by using the TS ",(0,o.yg)("inlineCode",{parentName:"p"},"typeof")," operator to ask TS to infer the types based on the Redux store definition:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/app/store.ts"',title:'"src/app/store.ts"'},"import { configureStore } from '@reduxjs/toolkit'\n\n// omit counter slice setup\n\nexport const store = configureStore({\n  reducer: {\n    counter: counterReducer\n  }\n})\n\n// highlight-start\n// Infer the type of `store`\nexport type AppStore = typeof store\n// Infer the `AppDispatch` type from the store itself\nexport type AppDispatch = typeof store.dispatch\n// Same for the `RootState` type\nexport type RootState = ReturnType<typeof store.getState>\n// highlight-end\n")),(0,o.yg)("p",null,"If you hover over the ",(0,o.yg)("inlineCode",{parentName:"p"},"RootState")," type in your editor, you should see ",(0,o.yg)("inlineCode",{parentName:"p"},"type RootState = { counter: CounterState; }"),". Since this type is automatically derived from the store definition, all the future changes to the ",(0,o.yg)("inlineCode",{parentName:"p"},"reducer")," setup will automatically be reflected in the ",(0,o.yg)("inlineCode",{parentName:"p"},"RootState")," type as well. This way we only need to define it once, and it will always be accurate."),(0,o.yg)("h3",{id:"exporting-typed-hooks"},"Exporting Typed Hooks"),(0,o.yg)("p",null,"We're going to be using React-Redux's ",(0,o.yg)("inlineCode",{parentName:"p"},"useSelector")," and ",(0,o.yg)("inlineCode",{parentName:"p"},"useDispatch")," hooks extensively in our components. Those need to reference the ",(0,o.yg)("inlineCode",{parentName:"p"},"RootState")," and ",(0,o.yg)("inlineCode",{parentName:"p"},"AppDispatch")," types each time we use the hooks."),(0,o.yg)("p",null,'We can simplify the usage and avoid repeating the types if we set up "pre-typed" versions of those hooks that have the right types already built in.'),(0,o.yg)("p",null,"React-Redux 9.1 includes ",(0,o.yg)("inlineCode",{parentName:"p"},".withTypes()")," methods that apply the right types to those hooks. We can export these pre-typed hooks, then use them in the rest of the application:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/app/hooks.ts"',title:'"src/app/hooks.ts"'},"// This file serves as a central hub for re-exporting pre-typed Redux hooks.\nimport { useDispatch, useSelector } from 'react-redux'\nimport type { AppDispatch, RootState } from './store'\n\n// highlight-start\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = useDispatch.withTypes<AppDispatch>()\nexport const useAppSelector = useSelector.withTypes<RootState>()\n// highlight-end\n")),(0,o.yg)("p",null,"That completes the setup process. Let's start building the app!"),(0,o.yg)("h2",{id:"main-posts-feed"},"Main Posts Feed"),(0,o.yg)("p",null,"The main feature for our social media feed app will be a list of posts. We'll add several more pieces to this feature as we go along, but to start off, our first goal is to only show the list of post entries on screen."),(0,o.yg)("h3",{id:"creating-the-posts-slice"},"Creating the Posts Slice"),(0,o.yg)("p",null,'The first step is to create a new Redux "slice" that will contain the data for our posts.'),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},'A "slice" is a collection of Redux reducer logic and actions for a single feature in your app'),', typically defined together in a single file. The name comes from splitting up the root Redux state object into multiple "slices" of state.'),(0,o.yg)("p",null,"Once we have the posts data in the Redux store, we can create the React components to show that data on the page."),(0,o.yg)("p",null,"Inside of ",(0,o.yg)("inlineCode",{parentName:"p"},"src"),", create a new ",(0,o.yg)("inlineCode",{parentName:"p"},"features")," folder, put a ",(0,o.yg)("inlineCode",{parentName:"p"},"posts")," folder inside of ",(0,o.yg)("inlineCode",{parentName:"p"},"features"),", and add a new file named ",(0,o.yg)("inlineCode",{parentName:"p"},"postsSlice.ts"),"."),(0,o.yg)("p",null,"We're going to use the Redux Toolkit ",(0,o.yg)("inlineCode",{parentName:"p"},"createSlice")," function to make a reducer function that knows how to handle our posts data. Reducer functions need to have some initial data included so that the Redux store has those values loaded when the app starts up."),(0,o.yg)("p",null,"For now, we'll create an array with some fake post objects inside so that we can begin adding the UI."),(0,o.yg)("p",null,"We'll import ",(0,o.yg)("inlineCode",{parentName:"p"},"createSlice"),", define our initial posts array, pass that to ",(0,o.yg)("inlineCode",{parentName:"p"},"createSlice"),", and export the posts reducer function that ",(0,o.yg)("inlineCode",{parentName:"p"},"createSlice")," generated for us:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-ts",metastring:'title="features/posts/postsSlice.ts"',title:'"features/posts/postsSlice.ts"'},"import { createSlice } from '@reduxjs/toolkit'\n\n// Define a TS type for the data we'll be using\nexport interface Post {\n  id: string\n  title: string\n  content: string\n}\n\n// Create an initial state value for the reducer, with that type\nconst initialState: Post[] = [\n  { id: '1', title: 'First Post!', content: 'Hello!' },\n  { id: '2', title: 'Second Post', content: 'More text' }\n]\n\n// Create the slice and pass in the initial state\nconst postsSlice = createSlice({\n  name: 'posts',\n  initialState,\n  reducers: {}\n})\n\n// Export the generated reducer function\nexport default postsSlice.reducer\n")),(0,o.yg)("p",null,"Every time we create a new slice, we need to add its reducer function to our Redux store. We already have a Redux store being created, but right now it doesn't have any data inside. Open up ",(0,o.yg)("inlineCode",{parentName:"p"},"app/store.ts"),", import the ",(0,o.yg)("inlineCode",{parentName:"p"},"postsReducer")," function, remove all of the ",(0,o.yg)("inlineCode",{parentName:"p"},"counter")," code, and update the call to ",(0,o.yg)("inlineCode",{parentName:"p"},"configureStore")," so that the ",(0,o.yg)("inlineCode",{parentName:"p"},"postsReducer")," is being passed as a reducer field named ",(0,o.yg)("inlineCode",{parentName:"p"},"posts"),":"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-ts",metastring:'title="app/store.ts"',title:'"app/store.ts"'},"import { configureStore } from '@reduxjs/toolkit'\n\n// highlight-next-line\n// Removed the `counterReducer` function, `CounterState` type, and `Action` import\n\n// highlight-next-line\nimport postsReducer from '@/features/posts/postsSlice'\n\nexport const store = configureStore({\n  reducer: {\n    // highlight-next-line\n    posts: postsReducer\n  }\n})\n")),(0,o.yg)("p",null,"This tells Redux that we want our top-level state object to have a field named ",(0,o.yg)("inlineCode",{parentName:"p"},"posts")," inside, and all the data for ",(0,o.yg)("inlineCode",{parentName:"p"},"state.posts")," will be updated by the ",(0,o.yg)("inlineCode",{parentName:"p"},"postsReducer")," function when actions are dispatched."),(0,o.yg)("p",null,"We can confirm that this works by opening the Redux DevTools Extension and looking at the current state contents:"),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"Initial posts state",src:n(7058).A,width:"590",height:"188"})),(0,o.yg)("h3",{id:"showing-the-posts-list"},"Showing the Posts List"),(0,o.yg)("p",null,"Now that we have some posts data in our store, we can create a React component that shows the list of posts. All of the code related to our feed posts feature should go in the ",(0,o.yg)("inlineCode",{parentName:"p"},"posts")," folder, so go ahead and create a new file named ",(0,o.yg)("inlineCode",{parentName:"p"},"PostsList.tsx")," in there. (Note that since this is a React component written in TypeScript and using JSX syntax, it needs a ",(0,o.yg)("inlineCode",{parentName:"p"},".tsx")," file extension for TypeScript to compile it properly)"),(0,o.yg)("p",null,"If we're going to render a list of posts, we need to get the data from somewhere. React components can read data from the Redux store using the ",(0,o.yg)("inlineCode",{parentName:"p"},"useSelector"),' hook from the React-Redux library. The "selector functions" that you write will be called with the entire Redux ',(0,o.yg)("inlineCode",{parentName:"p"},"state")," object as a parameter, and should return the specific data that this component needs from the store."),(0,o.yg)("p",null,"Since we're using TypeScript, all of our components should always use the pre-typed ",(0,o.yg)("inlineCode",{parentName:"p"},"useAppSelector")," hook that we added in ",(0,o.yg)("inlineCode",{parentName:"p"},"src/app/hooks.ts"),", since that has the right ",(0,o.yg)("inlineCode",{parentName:"p"},"RootState")," type already included."),(0,o.yg)("p",null,"Our initial ",(0,o.yg)("inlineCode",{parentName:"p"},"PostsList")," component will read the ",(0,o.yg)("inlineCode",{parentName:"p"},"state.posts")," value from the Redux store, then loop over the array of posts and show each of them on screen:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="features/posts/PostsList.tsx"',title:'"features/posts/PostsList.tsx"'},'// highlight-next-line\nimport { useAppSelector } from \'@/app/hooks\'\n\nexport const PostsList = () => {\n  // highlight-start\n  // Select the `state.posts` value from the store into the component\n  const posts = useAppSelector(state => state.posts)\n  // highlight-end\n\n  const renderedPosts = posts.map(post => (\n    <article className="post-excerpt" key={post.id}>\n      <h3>{post.title}</h3>\n      <p className="post-content">{post.content.substring(0, 100)}</p>\n    </article>\n  ))\n\n  return (\n    <section className="posts-list">\n      <h2>Posts</h2>\n      {renderedPosts}\n    </section>\n  )\n}\n')),(0,o.yg)("p",null,"We then need to update the routing in ",(0,o.yg)("inlineCode",{parentName:"p"},"App.tsx")," so that we show the ",(0,o.yg)("inlineCode",{parentName:"p"},"PostsList"),' component instead of the "welcome" message. Import the ',(0,o.yg)("inlineCode",{parentName:"p"},"PostsList")," component into ",(0,o.yg)("inlineCode",{parentName:"p"},"App.tsx"),", and replace the welcome text with ",(0,o.yg)("inlineCode",{parentName:"p"},"<PostsList />"),". We'll also wrap it in a ",(0,o.yg)("a",{parentName:"p",href:"https://react.dev/reference/react/Fragment"},"React Fragment"),", because we're going to add something else to the main page soon:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="App.tsx"',title:'"App.tsx"'},"import { BrowserRouter as Router, Route, Routes } from 'react-router-dom'\n\nimport { Navbar } from './components/Navbar'\n// highlight-next-line\nimport { PostsList } from './features/posts/PostsList'\n\nfunction App() {\n  return (\n    <Router>\n      <Navbar />\n      <div className=\"App\">\n        <Routes>\n          <Route\n            path=\"/\"\n            element={\n              // highlight-start\n              <>\n                <PostsList />\n              </>\n              // highlight-end\n            }\n          ></Route>\n        </Routes>\n      </div>\n    </Router>\n  )\n}\n\nexport default App\n")),(0,o.yg)("p",null,"Once that's added, the main page of our app should now look like this:"),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"Initial posts list",src:n(4408).A,width:"1080",height:"350"})),(0,o.yg)("p",null,"Progress! We've added some data to the Redux store, and shown it on screen in a React component."),(0,o.yg)("h3",{id:"adding-new-posts"},"Adding New Posts"),(0,o.yg)("p",null,"It's nice to look at posts people have written, but we'd like to be able to write our own posts. Let's create an \"Add New Post\" form that lets us write posts and save them."),(0,o.yg)("p",null,"We'll create the empty form first and add it to the page. Then, we'll connect the form to our Redux store so that new posts are added when we click the \"Save Post\" button."),(0,o.yg)("h4",{id:"adding-the-new-post-form"},"Adding the New Post Form"),(0,o.yg)("p",null,"Create ",(0,o.yg)("inlineCode",{parentName:"p"},"AddPostForm.tsx")," in our ",(0,o.yg)("inlineCode",{parentName:"p"},"posts")," folder. We'll add a text input for the post title, and a text area for the body of the post:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="features/posts/AddPostForm.tsx"',title:'"features/posts/AddPostForm.tsx"'},'import React from \'react\'\n\n// TS types for the input fields\n// See: https://epicreact.dev/how-to-type-a-react-form-on-submit-handler/\ninterface AddPostFormFields extends HTMLFormControlsCollection {\n  postTitle: HTMLInputElement\n  postContent: HTMLTextAreaElement\n}\ninterface AddPostFormElements extends HTMLFormElement {\n  readonly elements: AddPostFormFields\n}\n\nexport const AddPostForm = () => {\n  const handleSubmit = (e: React.FormEvent<AddPostFormElements>) => {\n    // Prevent server submission\n    e.preventDefault()\n\n    const { elements } = e.currentTarget\n    const title = elements.postTitle.value\n    const content = elements.postContent.value\n\n    console.log(\'Values: \', { title, content })\n\n    e.currentTarget.reset()\n  }\n\n  return (\n    <section>\n      <h2>Add a New Post</h2>\n      <form onSubmit={handleSubmit}>\n        <label htmlFor="postTitle">Post Title:</label>\n        <input type="text" id="postTitle" defaultValue="" required />\n        <label htmlFor="postContent">Content:</label>\n        <textarea\n          id="postContent"\n          name="postContent"\n          defaultValue=""\n          required\n        />\n        <button>Save Post</button>\n      </form>\n    </section>\n  )\n}\n')),(0,o.yg)("p",null,"Note that this doesn't have any Redux-specific logic yet - we'll add that next."),(0,o.yg)("p",null,"In this example we're using ",(0,o.yg)("a",{parentName:"p",href:"https://react.dev/reference/react-dom/components/input#reading-the-input-values-when-submitting-a-form"},'"uncontrolled" inputs')," and using HTML5 form validation to prevent submitting empty input fields, but it's up to you how you read values from a form - that's a preference about React usage patterns and not specific to Redux."),(0,o.yg)("p",null,"Import that component into ",(0,o.yg)("inlineCode",{parentName:"p"},"App.tsx"),", and add it right above the ",(0,o.yg)("inlineCode",{parentName:"p"},"<PostsList />")," component:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="App.tsx"',title:'"App.tsx"'},'// omit outer `<App>` definition\n<Route\n  path="/"\n  element={\n    <>\n      // highlight-next-line\n      <AddPostForm />\n      <PostsList />\n    </>\n  }\n></Route>\n')),(0,o.yg)("p",null,"You should see the form show up in the page right below the header."),(0,o.yg)("h4",{id:"saving-post-entries"},"Saving Post Entries"),(0,o.yg)("p",null,"Now, let's update our posts slice to add new post entries to the Redux store."),(0,o.yg)("p",null,"Our posts slice is responsible for handling all updates to the posts data. Inside of the ",(0,o.yg)("inlineCode",{parentName:"p"},"createSlice")," call, there's an object called ",(0,o.yg)("inlineCode",{parentName:"p"},"reducers"),". Right now, it's empty. We need to add a reducer function inside of there to handle the case of a post being added."),(0,o.yg)("p",null,"Inside of ",(0,o.yg)("inlineCode",{parentName:"p"},"reducers"),", add a function named ",(0,o.yg)("inlineCode",{parentName:"p"},"postAdded"),", which will receive two arguments: the current ",(0,o.yg)("inlineCode",{parentName:"p"},"state")," value, and the ",(0,o.yg)("inlineCode",{parentName:"p"},"action")," object that was dispatched. Since the posts slice ",(0,o.yg)("em",{parentName:"p"},"only")," knows about the data it's responsible for, the ",(0,o.yg)("inlineCode",{parentName:"p"},"state")," argument will be the array of posts by itself, and not the entire Redux state object."),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"action")," object will have our new post entry as the ",(0,o.yg)("inlineCode",{parentName:"p"},"action.payload")," field. When we declare the reducer function, we also need to tell TypeScript what that actual ",(0,o.yg)("inlineCode",{parentName:"p"},"action.payload")," type is, so that it can correctly check when we pass in the argument and access the ",(0,o.yg)("inlineCode",{parentName:"p"},"action.payload")," contents. To do that, we need to import the ",(0,o.yg)("inlineCode",{parentName:"p"},"PayloadAction")," type from Redux Toolkit, and declare the ",(0,o.yg)("inlineCode",{parentName:"p"},"action")," argument as ",(0,o.yg)("inlineCode",{parentName:"p"},"action: PayloadAction<ThePayloadTypeHere>"),". In this case, that will be ",(0,o.yg)("inlineCode",{parentName:"p"},"action: PayloadAction<Post>"),"."),(0,o.yg)("p",null,"The actual state update is adding the new post object into the ",(0,o.yg)("inlineCode",{parentName:"p"},"state")," array, which we can do via ",(0,o.yg)("inlineCode",{parentName:"p"},"state.push()")," in the reducer."),(0,o.yg)("admonition",{type:"warning"},(0,o.yg)("p",{parentName:"admonition"},"Remember: ",(0,o.yg)("strong",{parentName:"p"},"Redux reducer functions must ",(0,o.yg)("em",{parentName:"strong"},"always")," create new state values immutably, by making copies!")," It's safe to call mutating functions like ",(0,o.yg)("inlineCode",{parentName:"p"},"Array.push()")," or modify object fields like ",(0,o.yg)("inlineCode",{parentName:"p"},"state.someField = someValue")," inside of ",(0,o.yg)("inlineCode",{parentName:"p"},"createSlice()"),", because ",(0,o.yg)("a",{parentName:"p",href:"/tutorials/essentials/part-2-app-structure#reducers-and-immutable-updates"},"it converts those mutations into safe immutable updates internally using the Immer library"),", but ",(0,o.yg)("strong",{parentName:"p"},"don't try to mutate any data outside of ",(0,o.yg)("inlineCode",{parentName:"strong"},"createSlice"),"!"))),(0,o.yg)("p",null,"When we write the ",(0,o.yg)("inlineCode",{parentName:"p"},"postAdded")," reducer function, ",(0,o.yg)("inlineCode",{parentName:"p"},"createSlice")," will automatically generate an ",(0,o.yg)("a",{parentName:"p",href:"/tutorials/fundamentals/part-7-standard-patterns#action-creators"},'"action creator" function'),' with the same name. We can export that action creator and use it in our UI components to dispatch the action when the user clicks "Save Post".'),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-ts",metastring:'title="features/posts/postsSlice.ts"',title:'"features/posts/postsSlice.ts"'},"// highlight-start\n// Import the `PayloadAction` TS type\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit'\n// highlight-end\n\n// omit initial state\n\nconst postsSlice = createSlice({\n  name: 'posts',\n  initialState,\n  reducers: {\n    // highlight-start\n    // Declare a \"case reducer\" named `postAdded`.\n    // The type of `action.payload` will be a `Post` object.\n    postAdded(state, action: PayloadAction<Post>) {\n      // \"Mutate\" the existing state array, which is\n      // safe to do here because `createSlice` uses Immer inside.\n      state.push(action.payload)\n    }\n    // highlight-end\n  }\n})\n\n// highlight-start\n// Export the auto-generated action creator with the same name\nexport const { postAdded } = postsSlice.actions\n// highlight-end\n\nexport default postsSlice.reducer\n")),(0,o.yg)("p",null,"Terminology-wise, ",(0,o.yg)("inlineCode",{parentName:"p"},"postAdded")," here is an example of a ",(0,o.yg)("strong",{parentName:"p"},'"case reducer"'),". It's a reducer function, inside of a slice, that handles one specific action type that was dispatched. Conceptually, it's like we wrote a ",(0,o.yg)("inlineCode",{parentName:"p"},"case")," statement inside of a ",(0,o.yg)("inlineCode",{parentName:"p"},"switch"),' - "when we see this exact action type, run this logic":'),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-ts"},"function sliceReducer(state = initialState, action) {\n  switch (action.type) {\n    case 'posts/postAdded': {\n      // update logic here\n    }\n  }\n}\n")),(0,o.yg)("h4",{id:"dispatching-the-post-added-action"},'Dispatching the "Post Added" Action'),(0,o.yg)("p",null,"Our ",(0,o.yg)("inlineCode",{parentName:"p"},"AddPostForm"),' has text inputs and a "Save Post" button that triggers a submit handler, but the button doesn\'t do anything yet. We need to update the submit handler to dispatch the ',(0,o.yg)("inlineCode",{parentName:"p"},"postAdded")," action creator and pass in a new post object containing the title and content the user wrote."),(0,o.yg)("p",null,"Our post objects also need to have an ",(0,o.yg)("inlineCode",{parentName:"p"},"id")," field. Right now, our initial test posts are using some fake numbers for their IDs. We could write some code that would figure out what the next incrementing ID number should be, but it would be better if we generated a random unique ID instead. Redux Toolkit has a ",(0,o.yg)("inlineCode",{parentName:"p"},"nanoid")," function we can use for that."),(0,o.yg)("admonition",{type:"info"},(0,o.yg)("p",{parentName:"admonition"},"We'll talk more about generating IDs and dispatching actions in ",(0,o.yg)("a",{parentName:"p",href:"/tutorials/essentials/part-4-using-data"},"Part 4: Using Redux Data"),".")),(0,o.yg)("p",null,"In order to dispatch actions from a component, ",(0,o.yg)("strong",{parentName:"p"},"we need access to the store's ",(0,o.yg)("inlineCode",{parentName:"strong"},"dispatch")," function"),". We get this by calling the ",(0,o.yg)("inlineCode",{parentName:"p"},"useDispatch")," hook from React-Redux. Since we're using TypeScript, that means that we should actually ",(0,o.yg)("strong",{parentName:"p"},"import the ",(0,o.yg)("inlineCode",{parentName:"strong"},"useAppDispatch")," hook with the right types"),". We also need to import the ",(0,o.yg)("inlineCode",{parentName:"p"},"postAdded")," action creator into this file."),(0,o.yg)("p",null,"Once we have the ",(0,o.yg)("inlineCode",{parentName:"p"},"dispatch")," function available in our component, we can call ",(0,o.yg)("inlineCode",{parentName:"p"},"dispatch(postAdded())")," in a click handler. We can take the title and content values from our form, generate a new ID, and put them together into a new post object that we pass to ",(0,o.yg)("inlineCode",{parentName:"p"},"postAdded()"),"."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="features/posts/AddPostForm.tsx"',title:'"features/posts/AddPostForm.tsx"'},'import React from \'react\'\n// highlight-start\nimport { nanoid } from \'@reduxjs/toolkit\'\n\nimport { useAppDispatch } from \'@/app/hooks\'\n\nimport { type Post, postAdded } from \'./postsSlice\'\n// highlight-end\n\n// omit form types\n\nexport const AddPostForm = () => {\n  // highlight-start\n  // Get the `dispatch` method from the store\n  const dispatch = useAppDispatch()\n\n  // highlight-end\n\n  const handleSubmit = (e: React.FormEvent<AddPostFormElements>) => {\n    // Prevent server submission\n    e.preventDefault()\n\n    const { elements } = e.currentTarget\n    const title = elements.postTitle.value\n    const content = elements.postContent.value\n\n    // highlight-start\n    // Create the post object and dispatch the `postAdded` action\n    const newPost: Post = {\n      id: nanoid(),\n      title,\n      content\n    }\n    dispatch(postAdded(newPost))\n    // highlight-end\n\n    e.currentTarget.reset()\n  }\n\n  return (\n    <section>\n      <h2>Add a New Post</h2>\n      <form onSubmit={handleSubmit}>\n        <label htmlFor="postTitle">Post Title:</label>\n        <input type="text" id="postTitle" defaultValue="" required />\n        <label htmlFor="postContent">Content:</label>\n        <textarea\n          id="postContent"\n          name="postContent"\n          defaultValue=""\n          required\n        />\n        <button>Save Post</button>\n      </form>\n    </section>\n  )\n}\n')),(0,o.yg)("p",null,'Now, try typing in a title and some text, and click "Save Post". You should see a new item for that post show up in the posts list.'),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Congratulations! You've just built your first working React + Redux app!")),(0,o.yg)("p",null,"This shows the complete Redux data flow cycle:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Our posts list read the initial set of posts from the store with ",(0,o.yg)("inlineCode",{parentName:"li"},"useSelector")," and rendered the initial UI"),(0,o.yg)("li",{parentName:"ul"},"We dispatched the ",(0,o.yg)("inlineCode",{parentName:"li"},"postAdded")," action containing the data for the new post entry"),(0,o.yg)("li",{parentName:"ul"},"The posts reducer saw the ",(0,o.yg)("inlineCode",{parentName:"li"},"postAdded")," action, and updated the posts array with the new entry"),(0,o.yg)("li",{parentName:"ul"},"The Redux store told the UI that some data had changed"),(0,o.yg)("li",{parentName:"ul"},"The posts list read the updated posts array, and re-rendered itself to show the new post")),(0,o.yg)("p",null,"All the new features we'll add after this will follow the same basic patterns you've seen here: adding slices of state, writing reducer functions, dispatching actions, and rendering the UI based on data from the Redux store."),(0,o.yg)("p",null,"We can check the Redux DevTools Extension to see the action we dispatched, and look at how the Redux state was updated in response to that action. If we click the ",(0,o.yg)("inlineCode",{parentName:"p"},'"posts/postAdded"'),' entry in the actions list, the "Action" tab should look like this:'),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"postAdded action contents",src:n(1281).A,width:"987",height:"249"})),(0,o.yg)("p",null,'The "Diff" tab should also show us that ',(0,o.yg)("inlineCode",{parentName:"p"},"state.posts")," had one new item added, which is at index 2."),(0,o.yg)("p",null,"Remember, ",(0,o.yg)("strong",{parentName:"p"},'the Redux store should only contain data that\'s considered "global" for the application!')," In this case, only the ",(0,o.yg)("inlineCode",{parentName:"p"},"AddPostForm")," will need to know about the latest values for the input fields. Even if we built the form with ",(0,o.yg)("a",{parentName:"p",href:"https://react.dev/reference/react-dom/components/input#controlling-an-input-with-a-state-variable"},'"controlled" inputs'),", we'd want to keep the data in React component state instead of trying to keep the temporary data in the Redux store. When the user is done with the form, we dispatch a Redux action to update the store with the final values based on the user input."),(0,o.yg)("h2",{id:"what-youve-learned"},"What You've Learned"),(0,o.yg)("p",null,"We've set up the basics of a Redux app - store, slice with reducers, and UI to dispatch actions. Here's what the app looks like so far:"),(0,o.yg)("iframe",{class:"codesandbox",src:"https://codesandbox.io/embed/github/reduxjs/redux-essentials-example-app/tree/ts-checkpoint-1-postAdded?fontsize=14&hidenavigation=1&module=%2fsrc%2Ffeatures%2Fposts%2FpostsSlice.ts&theme=dark&runonclick=1",title:"redux-essentials-example",allow:"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"}),(0,o.yg)("p",null,"Let's recap what you've learned in this section:"),(0,o.yg)("admonition",{title:"Summary",type:"tip"},(0,o.yg)("ul",{parentName:"admonition"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"A Redux app has a single ",(0,o.yg)("inlineCode",{parentName:"strong"},"store")," that is passed to React components via a ",(0,o.yg)("inlineCode",{parentName:"strong"},"<Provider>")," component")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},'Redux state is updated by "reducer functions"'),":",(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},"Reducers always calculate a new state ",(0,o.yg)("em",{parentName:"li"},"immutably"),", by copying existing state values and modifying the copies with the new data"),(0,o.yg)("li",{parentName:"ul"},"The Redux Toolkit ",(0,o.yg)("inlineCode",{parentName:"li"},"createSlice"),' function generates "slice reducer" functions for you, and lets you write "mutating" code that is turned into safe immutable updates'),(0,o.yg)("li",{parentName:"ul"},"Those slice reducer functions are added to the ",(0,o.yg)("inlineCode",{parentName:"li"},"reducer")," field in ",(0,o.yg)("inlineCode",{parentName:"li"},"configureStore"),", and that defines the data and state field names inside the Redux store"))),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"React components read data from the store with the ",(0,o.yg)("inlineCode",{parentName:"strong"},"useSelector")," hook"),(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},"Selector functions receive the whole ",(0,o.yg)("inlineCode",{parentName:"li"},"state")," object, and should return a value"),(0,o.yg)("li",{parentName:"ul"},"Selectors will re-run whenever the Redux store is updated, and if the data they return has changed, the component will re-render"))),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"React components dispatch actions to update the store using the ",(0,o.yg)("inlineCode",{parentName:"strong"},"useDispatch")," hook"),(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"createSlice")," will generate action creator functions for each reducer we add to a slice"),(0,o.yg)("li",{parentName:"ul"},"Call ",(0,o.yg)("inlineCode",{parentName:"li"},"dispatch(someActionCreator())")," in a component to dispatch an action"),(0,o.yg)("li",{parentName:"ul"},"Reducers will run, check to see if this action is relevant, and return new state if appropriate"),(0,o.yg)("li",{parentName:"ul"},"Temporary data like form input values should be kept as React component state or plain HTML input fields. Dispatch a Redux action to update the store when the user is done with the form."))),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"If you're using TypeScript, the initial app setup should define TS types for ",(0,o.yg)("inlineCode",{parentName:"strong"},"RootState")," and ",(0,o.yg)("inlineCode",{parentName:"strong"},"AppDispatch")," based on the store, and export pre-typed versions of the React-Redux ",(0,o.yg)("inlineCode",{parentName:"strong"},"useSelector")," and ",(0,o.yg)("inlineCode",{parentName:"strong"},"useDispatch")," hooks")))),(0,o.yg)("h2",{id:"whats-next"},"What's Next?"),(0,o.yg)("p",null,"Now that you know the basic Redux data flow, move on to ",(0,o.yg)("a",{parentName:"p",href:"/tutorials/essentials/part-4-using-data"},"Part 4: Using Redux Data"),", where we'll add some additional functionality to our app and see examples of how to work with the data that's already in the store."))}u.isMDXComponent=!0},5680:(e,t,n)=>{n.d(t,{xA:()=>d,yg:()=>g});var a=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),c=p(n),h=o,g=c["".concat(l,".").concat(h)]||c[h]||u[h]||i;return n?a.createElement(g,s(s({ref:t},d),{},{components:n})):a.createElement(g,s({ref:t},d))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,s=new Array(i);s[0]=h;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[c]="string"==typeof e?e:o,s[1]=r;for(var p=2;p<i;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},224:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/devtools-initial-495df98e65b41fce8be3d240d6d76eaa.png"},7058:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/example-initial-posts-46e60b751ef709d9c992ae056d5e4ad7.png"},1281:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/example-postAdded-action-35b2b8227d002d2f94ef7069f81f0ab8.png"},4408:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/working_post_list-d4810a2a2b82ee5bc9780ff840b4ce9a.png"}}]);